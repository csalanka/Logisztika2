<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logisztikai Adatbázis - Siemens Energy Ikon</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <style>
        body {
            background-color: #000000;
            margin: 0;
            padding: 20px;
            color: #e0e0e0;
            font-family: Arial, sans-serif;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #1a1a1a;
            border: 2px solid #621d8a;
            border-radius: 10px;
        }
        .logo {
            display: block;
            margin: 0 auto;
            width: 200px;
        }
        h1 {
            text-align: center;
            color: #e0e0e0;
        }
        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        .tab {
            padding: 10px 20px;
            background-color: #2a2a2a;
            color: #e0e0e0;
            cursor: pointer;
            border: 1px solid #621d8a;
            border-bottom: none;
            border-radius: 5px 5px 0 0;
        }
        .tab.active {
            background-color: #621d8a;
        }
        .tab-content {
            display: none;
            padding: 20px;
            background-color: #222222;
            border: 1px solid #621d8a;
            border-radius: 0 0 5px 5px;
        }
        .tab-content.active {
            display: block;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        th, td {
            padding: 10px;
            border: 1px solid #621d8a;
            text-align: left;
        }
        th {
            background-color: #2a2a2a;
        }
        tr:nth-child(even) {
            background-color: #1a1a1a;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            color: #e0e0e0;
        }
        input, select {
            width: 100%;
            padding: 8px;
            background-color: #333333;
            border: 1px solid #621d8a;
            color: #e0e0e0;
            border-radius: 5px;
        }
        button {
            padding: 10px 20px;
            background-color: #621d8a;
            color: #e0e0e0;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #8a2be2;
        }
        .button-container {
            text-align: center;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <img src="siemens-energy-logo.png" alt="Siemens Energy Logo" class="logo">
        <h1>Logisztikai Adatbázis</h1>
        <div class="tabs">
            <div class="tab active" onclick="openTab('logisztikai-adatbazis')">Logisztikai adatbázis</div>
            <div class="tab" onclick="openTab('kontirozas')">Kontírozás</div>
            <div class="tab" onclick="openTab('uj-rekord')">Új rekord létrehozása</div>
        </div>

        <div id="logisztikai-adatbazis" class="tab-content active">
            <h2>Logisztikai Adatbázis</h2>
            <table id="logisztikai-table">
                <thead>
                    <tr>
                        <th>Anyag azonosító</th>
                        <th>Leírás</th>
                        <th>Mennyiség</th>
                        <th>Mértékegység</th>
                        <th>Raktár hely</th>
                        <th>Mozgás dátuma</th>
                        <th>Státusz</th>
                    </tr>
                </thead>
                <tbody id="logisztikai-tbody"></tbody>
            </table>
        </div>

        <div id="kontirozas" class="tab-content">
            <h2>Kontírozás</h2>
            <div class="form-group">
                <label for="kontirozas-terulet">Terület:</label>
                <select id="kontirozas-terulet" onchange="updateGepek()">
                    <option value="">Válassz területet</option>
                </select>
            </div>
            <div class="form-group">
                <label for="kontirozas-gep">Gép neve:</label>
                <select id="kontirozas-gep">
                    <option value="">Válassz gépet</option>
                </select>
            </div>
            <div class="form-group">
                <label for="kontirozas-rendelesi-szam">Belső rendelési szám:</label>
                <input type="text" id="kontirozas-rendelesi-szam" readonly>
            </div>
            <div class="form-group">
                <label for="kontirozas-koltseghely-szam">SAP költséghely szám:</label>
                <input type="text" id="kontirozas-koltseghely-szam" readonly>
            </div>
        </div>

        <div id="uj-rekord" class="tab-content">
            <h2>Új rekord létrehozása</h2>
            <div class="form-group">
                <label for="anyag-azonosito">Anyag azonosító:</label>
                <input type="text" id="anyag-azonosito">
            </div>
            <div class="form-group">
                <label for="leiras">Leírás:</label>
                <input type="text" id="leiras">
            </div>
            <div class="form-group">
                <label for="mennyiseg">Mennyiség:</label>
                <input type="number" id="mennyiseg">
            </div>
            <div class="form-group">
                <label for="mertekegyseg">Mértékegység:</label>
                <input type="text" id="mertekegyseg">
            </div>
            <div class="form-group">
                <label for="raktar-hely">Raktár hely:</label>
                <input type="text" id="raktar-hely">
            </div>
            <div class="form-group">
                <label for="mozgas-datuma">Mozgás dátuma:</label>
                <input type="date" id="mozgas-datuma">
            </div>
            <div class="form-group">
                <label for="statusz">Státusz:</label>
                <input type="text" id="statusz">
            </div>
            <div class="form-group">
                <label for="uj-terulet">Terület:</label>
                <select id="uj-terulet" onchange="updateUjGepek()">
                    <option value="">Válassz területet</option>
                </select>
            </div>
            <div class="form-group">
                <label for="uj-gep">Gép neve:</label>
                <select id="uj-gep">
                    <option value="">Válassz gépet</option>
                </select>
            </div>
            <div class="form-group">
                <label for="uj-rendelesi-szam">Belső rendelési szám:</label>
                <input type="text" id="uj-rendelesi-szam" readonly>
            </div>
            <div class="form-group">
                <label for="uj-koltseghely-szam">SAP költséghely szám:</label>
                <input type="text" id="uj-koltseghely-szam" readonly>
            </div>
            <div class="button-container">
                <button onclick="addNewRecord()">Rekord hozzáadása</button>
            </div>
        </div>
    </div>

    <script>
        let teruletekGepek = {};
        let logisztikaiAdatok = [];

        // Logisztikai adatbázis betöltése
        Papa.parse('data/logisztikai_adatbazis.csv', {
            download: true,
            header: true,
            complete: function(results) {
                logisztikaiAdatok = results.data;
                displayLogisztikaiAdatok();
            },
            error: function(error) {
                console.error('Hiba a logisztikai adatbázis betöltésekor:', error);
            }
        });

        // Területek és gépek betöltése
        Papa.parse('data/belső_megrendelések_adatbazis.csv', {
            download: true,
            header: true,
            complete: function(results) {
                const data = results.data;
                teruletekGepek = {};

                data.forEach(item => {
                    const terulet = item['Terület'];
                    if (!teruletekGepek[terulet]) {
                        teruletekGepek[terulet] = [];
                    }
                    teruletekGepek[terulet].push({
                        nev: item['Gép neve'],
                        rendelesiSzam: item['Belső rendelési szám'],
                        koltseghelySzam: item['SAP költséghely szám']
                    });
                });

                populateTeruletek();
            },
            error: function(error) {
                console.error('Hiba a belső megrendelések adatbázis betöltésekor:', error);
            }
        });

        function displayLogisztikaiAdatok() {
            const tbody = document.getElementById('logisztikai-tbody');
            tbody.innerHTML = '';
            logisztikaiAdatok.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item['Anyag azonosító'] || '-'}</td>
                    <td>${item['Leírás'] || '-'}</td>
                    <td>${item['Mennyiség'] || '-'}</td>
                    <td>${item['Mértékegység'] || '-'}</td>
                    <td>${item['Raktár hely'] || '-'}</td>
                    <td>${item['Mozgás dátuma'] || '-'}</td>
                    <td>${item['Státusz'] || '-'}</td>
                `;
                tbody.appendChild(row);
            });
        }

        function populateTeruletek() {
            const kontirozasTeruletSelect = document.getElementById('kontirozas-terulet');
            const ujTeruletSelect = document.getElementById('uj-terulet');
            Object.keys(teruletekGepek).forEach(terulet => {
                const option1 = document.createElement('option');
                option1.value = terulet;
                option1.textContent = terulet;
                kontirozasTeruletSelect.appendChild(option1);

                const option2 = document.createElement('option');
                option2.value = terulet;
                option2.textContent = terulet;
                ujTeruletSelect.appendChild(option2);
            });
        }

        function updateGepek() {
            const terulet = document.getElementById('kontirozas-terulet').value;
            const gepSelect = document.getElementById('kontirozas-gep');
            const rendelesiSzamInput = document.getElementById('kontirozas-rendelesi-szam');
            const koltseghelySzamInput = document.getElementById('kontirozas-koltseghely-szam');
            gepSelect.innerHTML = '<option value="">Válassz gépet</option>';
            rendelesiSzamInput.value = '';
            koltseghelySzamInput.value = '';

            if (terulet && teruletekGepek[terulet]) {
                teruletekGepek[terulet].forEach(gep => {
                    const option = document.createElement('option');
                    option.value = gep.nev;
                    option.textContent = gep.nev;
                    gepSelect.appendChild(option);
                });
            }

            gepSelect.onchange = function() {
                const selectedGep = teruletekGepek[terulet].find(g => g.nev === this.value);
                if (selectedGep) {
                    rendelesiSzamInput.value = selectedGep.rendelesiSzam || '-';
                    koltseghelySzamInput.value = selectedGep.koltseghelySzam || '-';
                }
            };
        }

        function updateUjGepek() {
            const terulet = document.getElementById('uj-terulet').value;
            const gepSelect = document.getElementById('uj-gep');
            const rendelesiSzamInput = document.getElementById('uj-rendelesi-szam');
            const koltseghelySzamInput = document.getElementById('uj-koltseghely-szam');
            gepSelect.innerHTML = '<option value="">Válassz gépet</option>';
            rendelesiSzamInput.value = '';
            koltseghelySzamInput.value = '';

            if (terulet && teruletekGepek[terulet]) {
                teruletekGepek[terulet].forEach(gep => {
                    const option = document.createElement('option');
                    option.value = gep.nev;
                    option.textContent = gep.nev;
                    gepSelect.appendChild(option);
                });
            }

            gepSelect.onchange = function() {
                const selectedGep = teruletekGepek[terulet].find(g => g.nev === this.value);
                if (selectedGep) {
                    rendelesiSzamInput.value = selectedGep.rendelesiSzam || '-';
                    koltseghelySzamInput.value = selectedGep.koltseghelySzam || '-';
                }
            };
        }

        function addNewRecord() {
            const newRecord = {
                'Anyag azonosító': document.getElementById('anyag-azonosito').value,
                'Leírás': document.getElementById('leiras').value,
                'Mennyiség': document.getElementById('mennyiseg').value,
                'Mértékegység': document.getElementById('mertekegyseg').value,
                'Raktár hely': document.getElementById('raktar-hely').value,
                'Mozgás dátuma': document.getElementById('mozgas-datuma').value,
                'Státusz': document.getElementById('statusz').value
            };
            logisztikaiAdatok.push(newRecord);
            displayLogisztikaiAdatok();
            alert('Új rekord hozzáadva!');
        }

        function openTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(tabId).classList.add('active');
            document.querySelector(`.tab[onclick="openTab('${tabId}')"]`).classList.add('active');
        }
    </script>
</body>
</html>
